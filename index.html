<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>gravity</title>
  </head>
  <body>
    <canvas id="target" width="800" height="800"></canvas>
    <p>
      <label for="id">G</label><input id="G" type="range" min="0" max="1.0" step="0.01" value="0.65"/>
    </p>    
    <script type="module">
      import init, {Simulation, step, render} from "./pkg/gravity.js";

      class UI {
        constructor(simulation) {
          document.getElementById('G').onchange = function(e) {
            simulation.g = e.target.value;
          };
        }
      }

      function run() {
        const simulation = new Simulation();
        simulation.add(0, -20, 5.0, 0, 1000.1);
        simulation.add(0, 20, -5.0, 0, 1000.1);
        simulation.g = document.getElementById('G').value;
        const ui = new UI(simulation);
        function frame(t) {
          render("target", simulation);
          step(simulation, 0.1);
          requestAnimationFrame(frame);
        }
        requestAnimationFrame(frame);
      }
      
      const ui = new UI();
      init().then(run);
    </script>
  </body>
</html>